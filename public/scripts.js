var $=$.noConflict();$(document).ready(function(){function t(t){$("#scroller #slide img").fadeOut("500"),$("#modal-description").empty().html(a[t][2]),$("#modal-footnote").empty().html(a[t][3]),$("#scroller #slide").addClass("loading").attr("title",a[t][0]).html('<img src="'+a[t][1]+'" alt="'+a[t][0]+'" />'),$("#navigation .current").removeClass("current"),$("#navigation .thumbnail."+t).addClass("current"),$("#scroller #slide img").on("load",function(){if($(window).width()<1056)c=$("#modal-title").outerHeight()+$("#launch").outerHeight()+$("#navigation").outerHeight()+$("#modal-description").outerHeight()+$("#modal-footnote").outerHeight()+$("#scroller #slide img").outerHeight()+8;else{var t=Math.max($("#modal-description").outerHeight(),$("#navigation").outerHeight());c=$("#modal-title").outerHeight()+t+$("#modal-footnote").outerHeight()+$("#scroller #slide img").outerHeight()+8}$("#scroller #slide").removeClass("loading"),$("#modal-content").animate({height:c},600,function(){$("#scroller #slide img").fadeIn("500")})})}$(function(){$("a").on("click",function(){if(""!==this.hash){var t=$(this.hash);if(t=t.length?t:$("[name="+this.hash.slice(1)+"]"),t.length)return $("html,body").stop(!1,!1).animate({scrollTop:t.offset().top-50},1e3),!1}})});var e,i,n,o,a,l,r,s,c,d,h;if(a=new Array,$("#what .thumb").click(function(c){c.preventDefault();var f=$(this).attr("rel");$("#overlay").is(":empty")&&$("#overlay").append('<div id="modal-content"><div id="modal-title"></div><div id="launch"></div><a href="#" class="close"><span>&#xf00d;</span> Close</a><div id="modal-data"><div id="scroller"><div id="navigation"></div><div id="modal-description"></div><div id="modal-footnote"></div><div id="slide"></div></div></div></div>'),$.ajax({type:"GET",url:"/portfolio/"+f+"/control.xml",dataType:"xml",success:function(c){a.length=0,$(c).find("fulltitle").each(function(){e=$(this).text(),$("#modal-title").empty().html(e)}),$(c).find("subtitle").each(function(){i=$(this).text(),""!==i&&$("#modal-title").append("<span>"+i+"</span>")}),$(c).find("link").each(function(){r=$(this).text(),""!==r&&$("#launch").html('<a href="'+r+'" id="site-launch" target="_blank">Launch Site</a>')}),$(c).find("slide").each(function(){d=$(this).attr("id"),l=$(this).find("title").text(),s="/portfolio/"+f+"/images/"+$(this).find("image").text(),h="/portfolio/"+f+"/thumbs/"+$(this).find("image").text(),n=$(this).find("description").text(),o=$(this).find("footnote").text(),a[d]=new Array(l,s,n,o),$("#navigation").append('<a href="'+d+'" class="'+d+' thumbnail"><img src="'+h+'" /></a>')}),d=1,$("#scroller").prepend('<a href="#" class="nav-lft">&#xf104;</a>'),$("#scroller").append('<a href="#" class="nav-rt">&#xf105;</a>'),$("#navigation .thumbnail").click(function(e){e.preventDefault(),d=$(this).attr("href"),t(d)}),$("#scroller .nav-lft").click(function(e){e.preventDefault(),d--,d<1&&(d=a.length-1),t(d)}),$("#scroller .nav-rt").click(function(e){e.preventDefault(),d++,d>a.length-1&&(d=1),t(d)})}}),$("#overlay").fadeIn(500,function(){$("#modal-content").css("top",$(window).scrollTop()+"px").slideDown(500,function(){$("#modal-data").slideDown(500,function(){t(d)})})})}),$(document.body).on("click","#overlay, #overlay .close",function(t){t.preventDefault(),$("#modal-content").slideUp(500,function(){$("#overlay").fadeOut("500").empty()})}),$(document.body).on("click","#overlay > *",function(t){t.stopPropagation()}),$("header nav").length){0===$(window).scrollTop()&&$("nav").css("top","0"),$("nav").css("background-image",'url("images/pointer.png")');var f=$("#what").offset().top,p=$("#where").offset().top,u=$("#how").offset().top,m=0;$(window).scroll(function(){var t=$(this).scrollTop();t<m?$("nav").css("top","0"):$("nav").css("top",""),m=t,$(window).scrollTop()<f-51?$("nav").css("background-position","12.5% bottom"):$(window).scrollTop()<p-51?$("nav").css("background-position","37.5% bottom"):$(window).scrollTop()<u-51?$("nav").css("background-position","62.5% bottom"):$(window).scrollTop()>=u-51&&$("nav").css("background-position","87.5% bottom")})}var v,g,x;v="mailto:",g="jfaist.com",x="jade@",$(".email").attr("href",v+x+g).attr("title","Email Me").html("<span>&#xf0e0;</span> email me")}),function(){function t(){}function e(t){return a.retinaImageSuffix+t}function i(t,i){if(this.path=t||"","undefined"!=typeof i&&null!==i)this.at_2x_path=i,this.perform_check=!1;else{if(void 0!==document.createElement){var n=document.createElement("a");n.href=this.path,n.pathname=n.pathname.replace(l,e),this.at_2x_path=n.href}else{var o=this.path.split("?");o[0]=o[0].replace(l,e),this.at_2x_path=o.join("?")}this.perform_check=!0}}function n(t){this.el=t,this.path=new i(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var e=this;this.path.check_2x_variant(function(t){t&&e.swap()})}var o="undefined"==typeof exports?window:exports,a={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};o.Retina=t,t.configure=function(t){null===t&&(t={});for(var e in t)t.hasOwnProperty(e)&&(a[e]=t[e])},t.init=function(t){null===t&&(t=o);var e=t.onload||function(){};t.onload=function(){var t,i,o=document.getElementsByTagName("img"),a=[];for(t=0;t<o.length;t+=1)i=o[t],i.getAttributeNode("data-no-retina")||a.push(new n(i));e()}},t.isRetina=function(){var t="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return o.devicePixelRatio>1||!(!o.matchMedia||!o.matchMedia(t).matches)};var l=/\.\w+$/;o.RetinaImagePath=i,i.confirmed_paths=[],i.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},i.prototype.check_2x_variant=function(t){var e,n=this;return this.is_external()?t(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in i.confirmed_paths?t(!0):(e=new XMLHttpRequest,e.open("HEAD",this.at_2x_path),e.onreadystatechange=function(){if(4!==e.readyState)return t(!1);if(e.status>=200&&e.status<=399){if(a.check_mime_type){var o=e.getResponseHeader("Content-Type");if(null===o||!o.match(/^image/i))return t(!1)}return i.confirmed_paths.push(n.at_2x_path),t(!0)}return t(!1)},e.send(),void 0):t(!0)},o.RetinaImage=n,n.prototype.swap=function(t){function e(){i.el.complete?(a.force_original_dimensions&&(i.el.setAttribute("width",i.el.offsetWidth),i.el.setAttribute("height",i.el.offsetHeight)),i.el.setAttribute("src",t)):setTimeout(e,5)}"undefined"==typeof t&&(t=this.path.at_2x_path);var i=this;e()},t.isRetina()&&t.init(o)}();